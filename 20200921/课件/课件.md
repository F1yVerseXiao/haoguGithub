# 1. 操作jQuery集合

## 1.1 确定集合大小

jQuery集合与数组很相似，我们可以像获取数组中元素的个数一样，通过`length`属性获取jQuery集合中元素的个数。例如，我们可以获取页面中所有`<p>`元素的，然后输出jQuery集合中`<p>`元素

```javascript
alert($('p').length);
```

## 1.2 遍历集合元素

| 方法           | 描述                 |
| -------------- | -------------------- |
| each(iterator) | 遍历集合中的所有元素 |

## 1.3 获取元素的索引

| 方法             | 描述                                                         |
| ---------------- | ------------------------------------------------------------ |
| index([element]) | 返回指定元素其相对于同胞元素的* index*位置,如果未找到元素，index() 将返回 -1。 |

## 1.4 集合转数组

| 方法      | 描述                                   |
| --------- | -------------------------------------- |
| toArray() | 将jQuery集合转换成包含所有元素的数组。 |

## 1.5 过滤(方法)

| 方法                | 描述                                                         |
| ------------------- | ------------------------------------------------------------ |
| first()             | 返回包含第一个元素的新集合。如果初始集合为空，则返回空集合。 |
| last()              | 返回包含最后一个元素的新集合。如果初始集合为空，则返回空集合。 |
| filter(selector)    | 创建一个集合副本，将匹配元素集合缩减为匹配指定选择器的元素。 |
| has(selector)       | 判断当前节点是否包含选择器中的子元素，返回包含固定子元素的父元素（jquery对象）。 |
| not(selector)       | 创建不包含选择器selector参数匹配元素的新集合。               |
| is(selector)        | 确定集合中是否有元素匹配给定的选择器。                       |
| slice(start, [end]) | 获取集合的子集。                                             |
| map(callback)       | 在集合中的每个元素上调callback函数，然后返回值到一个jQuery对象中。 |

#### 多学一招：

- prevObject

jQuery选择器在遍历的过程中都会找到一组元素（一个jQuery对象），
然后jQuery会把这组元素推入到栈中。
prevObject属性就指向这个对象栈中的前一个对象，
而通过这个属性可以回溯到最初的DOM元素集。
利用这个DOM元素栈可以减少重复的查询和遍历的操作，
而减少重复操作也正是优化jQuery代码性能的关键所在。

## 1.6 创建新HTML元素
使用jQuery动态创建元素是非常容易的，只需要给`$()`函数传递一个包含HTML标签的字符串就可以创建一个jQuery对象。

```javascript
$('<div>Hello jQuery</div>');
```

如果只是想创建一个空的`<div>`元素，那么可以直接使用下面的简写代码：

```javascript
$('<div></div>');
```

这种语法等价于下面的两种语法：

```javascript
$('<div>');
$('<div/>');
```

假如要创建一个`<img>`元素，它包含多个属性，并且可以点击该图片，我们可以下面的语法创建：

```javascript
$('<img>', {
    src: 'img/photo.png',
    alt: '',
    title: '',
    click: function() {
        alert('nihao');
    }
}).appendTo('body');
```

这段代码创建一个包含多个属性，并且可以点击的`<img>`元素，然后将该元素追加到了页面上的`<body>`元素中。

## 1.7 操作集合的其他方法

| 方法        | 描述                                                         |
| ----------- | ------------------------------------------------------------ |
| .add()      | 向集合中添加新元素。                                         |
| .addBack()  | 把栈上前一个集合的元素添加到当前集合里，可以选择性提供选择器参数。 |
| .contents() | 查找匹配元素内部所有的子节点（包括文本节点）。如果元素是一个iframe，则查找文档内容。 |
| .end()      | 在jQuery链式调用中使用该方法；在当前调用链中结束最近的过滤操作，然后返回匹配元素的集合到之前的状态。 |

```html
<ul>
    <li>list item 1</li>
    <li>list item 2</li>
    <li class="third-item">list item 3</li>
    <li id="four-item">list item 4</li>
    <li>list item 5</li>
</ul>
<p>Hello<a href="http://www.baidu.com/">百度</a>搜索</p>
<p>
    <span>end测试1</span>
    <span>end测试2</span>
</p>
```

